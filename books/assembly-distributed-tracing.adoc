// This assembly is included in the following assemblies:
//
// master.adoc

[id='assembly-distributed-tracing-{context}']
= Distributed tracing

{ProductName} on {ProductPlatformName} supports distributed tracing for:

* Kafka Producers, Kafka Consumers, and Kafka Streams applications (referred to as _Kafka clients_)

* MirrorMaker and Kafka Connect

* Kafka Bridge

The steps to configure distributed tracing vary by client and component; however, three high-level tasks are involved:

. Enable a Jaeger tracer.

. Enable the Interceptors for the client or component.
+
* For Kafka clients, this step involves instrumenting the application code for OpenTracing.
* For MirrorMaker, Kafka Connect, and the Kafka Bridge, this step involves modifying the relevant properties files.

. Set tracing environment variables before deployment.

//How you configure distributed tracing varies depending on the client or component involved.

//.Kafka clients (Kafka Producers, Kafka Consumers, and Kafka Streams applications)

//You instrument Kafka clients for distributed tracing using an OpenTracing client library. This involves adding instrumentation code that monitors the execution of individual transactions in order to generate trace data.

//Before you start instrumenting Kafka clients and components, you must first initialize and configure a Jaeger tracer in each client and component. This is described in xref:proc-configuring-jaeger-tracer-kafka-clients-{context}[].

This chapter provides an overview of distributed tracing, as well as instructions for configuring supported clients and components for tracing. Setting up distributed tracing for applications and systems beyond {ProductName} is outside the scope of this chapter. To learn more about this subject, see the {OpenTracingDocs} and search for "inject and extract".

NOTE: Distributed tracing is not supported for Kafka brokers.

.Prerequisites

* The Jaeger backend components are deployed to the host operating system. For deployment instructions, see the https://www.jaegertracing.io/docs/1.14/deployment/[Jaeger deployment documentation^].

include::tracing/con-overview-distributed-tracing.adoc[leveloffset=+1]

//.Outline of procedures

//To set up distributed tracing for {ProductName}, follow these procedures:

//* xref:proc-configuring-jaeger-tracer-kafka-clients-{context}[Initialize a Jaeger tracer for Kafka clients and components]

//* xref:proc-instrumenting-producers-consumers-for-opentracing-{context}[Instrument Kafka Producers and Consumers for tracing]

//* xref:proc-instrumenting-kafka-streams-with-tracers-{context}[Instrument Kafka Streams applications for tracing]

//* xref:proc-instrumenting-mirror-maker-connect-bridge-for-tracing-{context}[Instrument Mirror Maker, Kafka Connect, and the Kafka Bridge for tracing]

//* xref:proc-enabling-tracing-for-kafka-bridge-{context}[Enable tracing for the Kafka Bridge] 

//This chapter covers setting up distributed tracing for {ProductName} clients and components only. 

//.Before you start

//Before you set up distributed tracing for {ProductName}, it is helpful to understand:

//* The basics of OpenTracing, including key concepts such as traces, spans, and tracers. Refer to the {OpenTracingDocs}.
//* The components of the {JaegerArch}. 

include::assembly-setting-up-tracing-kafka-clients.adoc[leveloffset=+1]

include::assembly-instrumenting-kafka-clients-components-tracers.adoc[leveloffset=+1]

include::tracing/ref-tracing-environment-variables.adoc[leveloffset=+1]
